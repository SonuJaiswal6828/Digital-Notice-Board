{% extends "base.html" %}

{% block content %}
<div class="min-h-screen p-6">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-blue-100">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center mb-4 md:mb-0">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
            <i class="fas fa-user-graduate text-blue-600 text-xl"></i>
          </div>
          <div>
            <h1 class="text-2xl md:text-3xl font-bold text-blue-600">Student Dashboard</h1>
            <p class="text-blue-400">Welcome back, {{ session.username }}!</p>
          </div>
        </div>
        <div class="flex space-x-3">
          <a href="#" class="bg-blue-100 text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-200 transition duration-300 flex items-center">
            <i class="fas fa-user-circle mr-2"></i>Profile
          </a>
          <a href="/logout" class="bg-red-100 text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-red-200 transition duration-300 flex items-center">
            <i class="fas fa-sign-out-alt mr-2"></i>Logout
          </a>
        </div>
      </div>
    </div>

    <!-- Filters and Search -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-blue-100">
      <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
        <div class="w-full md:w-1/2">
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i class="fas fa-search text-blue-400"></i>
            </div>
            <input 
              type="text" 
              id="searchInput"
              placeholder="Search notices..." 
              class="w-full pl-10 pr-4 py-2 rounded-lg border border-blue-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-300 focus:outline-none transition duration-300"
            >
          </div>
        </div>
        <div class="w-full md:w-2/5">
          <select id="categoryFilter" class="w-full px-4 py-2 rounded-lg border border-blue-200 focus:border-blue-400 focus:ring-2 focus:ring-blue-300 focus:outline-none transition duration-300 text-blue-700">
            <option value="all">All Categories</option>
            <option value="general">General</option>
            <option value="important">Important</option>
            <option value="urgent">Urgent</option>
            <option value="event">Event</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Notices List -->
    <div class="bg-white rounded-2xl shadow-lg p-6 border border-blue-100">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-blue-700 flex items-center">
          <i class="fas fa-bullhorn mr-2 text-blue-500"></i>All Notices
        </h2>
        <span class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm">
          {{ notices|length }} Notices
        </span>
      </div>

      <div class="space-y-6" id="noticesContainer">
        {% for notice in notices %}
        <div class="notice-card p-5 rounded-lg border {% if notice.category == 'urgent' %}bg-yellow-50 border-yellow-100{% elif notice.category == 'important' %}bg-red-50 border-red-100{% elif notice.category == 'event' %}bg-green-50 border-green-100{% else %}bg-blue-50 border-blue-100{% endif %}" data-category="{{ notice.category }}">
          <div class="flex justify-between items-start mb-3">
            <h3 class="text-lg font-bold text-blue-700">{{ notice.title }}</h3>
            <span class="category-badge px-3 py-1 rounded-full text-xs {% if notice.category == 'urgent' %}bg-yellow-100 text-yellow-600{% elif notice.category == 'important' %}bg-red-100 text-red-600{% elif notice.category == 'event' %}bg-green-100 text-green-600{% else %}bg-blue-100 text-blue-600{% endif %}">
              {{ notice.category|capitalize }}
            </span>
          </div>
          <p class="text-gray-700">{{ notice.content }}</p>
          <div class="flex justify-between items-center mt-4">
            <div class="flex items-center text-blue-400 text-sm">
              <i class="far fa-clock mr-1"></i>
              <span>Posted on: {{ notice.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
            </div>
            <button class="text-blue-500 hover:text-blue-700 text-sm font-medium flex items-center">
              <i class="far fa-bookmark mr-1"></i>Save
            </button>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Pagination -->
      <div class="flex justify-center mt-8">
        <nav class="flex items-center space-x-2">
          <a href="#" class="px-3 py-1 rounded-lg bg-blue-100 text-blue-600 font-medium hover:bg-blue-200 transition duration-300">
            <i class="fas fa-chevron-left"></i>
          </a>
          <a href="#" class="px-3 py-1 rounded-lg bg-blue-500 text-white font-medium">1</a>
          <a href="#" class="px-3 py-1 rounded-lg bg-blue-100 text-blue-600 font-medium hover:bg-blue-200 transition duration-300">2</a>
          <a href="#" class="px-3 py-1 rounded-lg bg-blue-100 text-blue-600 font-medium hover:bg-blue-200 transition duration-300">3</a>
          <a href="#" class="px-3 py-1 rounded-lg bg-blue-100 text-blue-600 font-medium hover:bg-blue-200 transition duration-300">
            <i class="fas fa-chevron-right"></i>
          </a>
        </nav>
      </div>
    </div>
  </div>
</div>

<script>
  // Search and filter functionality
  document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const noticeCards = document.querySelectorAll('.notice-card');
    
    function filterNotices() {
      const searchTerm = searchInput.value.toLowerCase();
      const selectedCategory = categoryFilter.value;
      
      noticeCards.forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        const content = card.querySelector('p').textContent.toLowerCase();
        const category = card.getAttribute('data-category');
        
        const matchesSearch = title.includes(searchTerm) || content.includes(searchTerm);
        const matchesCategory = selectedCategory === 'all' || category === selectedCategory;
        
        if (matchesSearch && matchesCategory) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    searchInput.addEventListener('input', filterNotices);
    categoryFilter.addEventListener('change', filterNotices);
  });
</script>
{% endblock %}